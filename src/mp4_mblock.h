 /*This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * The GPL can be found at: http://www.gnu.org/copyleft/gpl.html						*
 *																						*
 **************************************************************************
 *																		  *	
 * Copyright (C) 2001 - Project Mayo									  *
 *																		  *
 * Andrea Graziani (Ag)													  *
 *																		  *
 * DivX Advanced Research Center <darc@projectmayo.com>					  *
 *																	      *
 **************************************************************************/

// mp4_mblock.h //

#ifndef _MP4_MBLOCK_H_
#define _MP4_MBLOCK_H_

/**/

const char DQtab[4] = {
	-1, -2, 1, 2
};

const char MCBPCtabIntra[] = {
	-1,0,
	20,6, 36,6, 52,6, 4,4, 4,4, 4,4, 
	4,4, 19,3, 19,3, 19,3, 19,3, 19,3, 
	19,3, 19,3, 19,3, 35,3, 35,3, 35,3, 
	35,3, 35,3, 35,3, 35,3, 35,3, 51,3, 
	51,3, 51,3, 51,3, 51,3, 51,3, 51,3, 
	51,3
};

const short MCBPCtabInter[] = {
	-1,0, 
	255,9, 52,9, 36,9, 20,9, 49,9, 35,8, 35,8, 19,8, 19,8,
	50,8, 50,8, 51,7, 51,7, 51,7, 51,7, 34,7, 34,7, 34,7,
	34,7, 18,7, 18,7, 18,7, 18,7, 33,7, 33,7, 33,7, 33,7, 
	17,7, 17,7, 17,7, 17,7, 4,6, 4,6, 4,6, 4,6, 4,6, 
	4,6, 4,6, 4,6, 48,6, 48,6, 48,6, 48,6, 48,6, 48,6, 
	48,6, 48,6, 3,5, 3,5, 3,5, 3,5, 3,5, 3,5, 3,5, 
	3,5, 3,5, 3,5, 3,5, 3,5, 3,5, 3,5, 3,5, 3,5, 
	32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 
	32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 
	32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 32,4, 
	32,4, 32,4, 32,4, 32,4, 32,4, 16,4, 16,4, 16,4, 16,4, 
	16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 
	16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 
	16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 16,4, 
	16,4, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 
	2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 
	2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 
	2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 
	2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 
	2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 
	2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 2,3, 
	2,3, 2,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 
	1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 
	1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 
	1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 
	1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 
	1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 
	1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 1,3, 
	1,3, 1,3, 1,3
};

/**/

const char CBPYtab[] = 
{ 
	-1,0, -1,0, 6,6,  9,6,  8,5,  8,5,  4,5,  4,5,
	2,5,  2,5,  1,5,  1,5,  0,4,  0,4,  0,4,  0,4, 
	12,4, 12,4, 12,4, 12,4, 10,4, 10,4, 10,4, 10,4,
	14,4, 14,4, 14,4, 14,4, 5,4,  5,4,  5,4,  5,4,
	13,4, 13,4, 13,4, 13,4, 3,4,  3,4,  3,4,  3,4, 
	11,4, 11,4, 11,4, 11,4, 7,4,  7,4,  7,4,  7,4 
};

/**/

const char MVtab0[] =
{
	3,4, -3,4, 2,3, 2,3, -2,3, -2,3, 1,2, 1,2, 1,2, 1,2,
	-1,2, -1,2, -1,2, -1,2
};

const char MVtab1[] = 
{
	12,10, -12,10, 11,10, -11,10, 10,9, 10,9, -10,9, -10,9,
	9,9, 9,9, -9,9, -9,9, 8,9, 8,9, -8,9, -8,9, 7,7, 7,7,
	7,7, 7,7, 7,7, 7,7, 7,7, 7,7, -7,7, -7,7, -7,7, -7,7,
	-7,7, -7,7, -7,7, -7,7, 6,7, 6,7, 6,7, 6,7, 6,7, 6,7,
	6,7, 6,7, -6,7, -6,7, -6,7, -6,7, -6,7, -6,7, -6,7,
	-6,7, 5,7, 5,7, 5,7, 5,7, 5,7, 5,7, 5,7, 5,7, -5,7,
	-5,7, -5,7, -5,7, -5,7, -5,7, -5,7, -5,7, 4,6, 4,6, 4,6,
	4,6, 4,6, 4,6, 4,6, 4,6, 4,6, 4,6, 4,6, 4,6, 4,6, 4,6,
	4,6, 4,6, -4,6, -4,6, -4,6, -4,6, -4,6, -4,6, -4,6,
	-4,6, -4,6, -4,6, -4,6, -4,6, -4,6, -4,6, -4,6, -4,6
};

const char MVtab2[] = 
{
	32,12, -32,12, 31,12, -31,12, 30,11, 30,11, -30,11, -30,11,
	29,11, 29,11, -29,11, -29,11, 28,11, 28,11, -28,11, -28,11,
	27,11, 27,11, -27,11, -27,11, 26,11, 26,11, -26,11, -26,11,
	25,11, 25,11, -25,11, -25,11, 24,10, 24,10, 24,10, 24,10,
	-24,10, -24,10, -24,10, -24,10, 23,10, 23,10, 23,10, 23,10,
	-23,10, -23,10, -23,10, -23,10, 22,10, 22,10, 22,10, 22,10,
	-22,10, -22,10, -22,10, -22,10, 21,10, 21,10, 21,10, 21,10,
	-21,10, -21,10, -21,10, -21,10, 20,10, 20,10, 20,10, 20,10,
	-20,10, -20,10, -20,10, -20,10, 19,10, 19,10, 19,10, 19,10,
	-19,10, -19,10, -19,10, -19,10, 18,10, 18,10, 18,10, 18,10,
	-18,10, -18,10, -18,10, -18,10, 17,10, 17,10, 17,10, 17,10,
	-17,10, -17,10, -17,10, -17,10, 16,10, 16,10, 16,10, 16,10,
	-16,10, -16,10, -16,10, -16,10, 15,10, 15,10, 15,10, 15,10,
	-15,10, -15,10, -15,10, -15,10, 14,10, 14,10, 14,10, 14,10,
	-14,10, -14,10, -14,10, -14,10, 13,10, 13,10, 13,10, 13,10,
	-13,10, -13,10, -13,10, -13,10
};

/**/

#endif // _MP4_MBLOCK_H_

/**/

extern int macroblock();
extern int blockIntra();
extern int blockInter();
